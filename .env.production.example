# ===================================
# BaluHost Production Environment Configuration
# ===================================
# Copy this file to .env and fill in your production values
# NEVER commit the actual .env file to version control!

# ===================================
# Application Mode
# ===================================
# Set to 'prod' for production deployment
# Set to 'dev' for development (uses SQLite, mock data, no mdadm)
NAS_MODE=prod

# ===================================
# Security Keys (CRITICAL - CHANGE THESE!)
# ===================================
# Generate secure random keys with:
# python -c "import secrets; print(secrets.token_urlsafe(32))"

# Main secret key for JWT signing and security operations
# MUST be at least 32 characters in production
SECRET_KEY=CHANGE_ME_TO_A_SECURE_RANDOM_STRING_32_CHARS_MIN

# Token secret (legacy, will be unified with SECRET_KEY in future)
TOKEN_SECRET=CHANGE_ME_TO_A_SECURE_RANDOM_STRING_32_CHARS_MIN

# Token expiration in minutes (default: 720 = 12 hours)
TOKEN_EXPIRE_MINUTES=720

# ===================================
# Database Configuration (PostgreSQL)
# ===================================
POSTGRES_DB=baluhost
POSTGRES_USER=baluhost
POSTGRES_PASSWORD=CHANGE_ME_TO_A_STRONG_PASSWORD

# Full database URL (constructed from above values)
# postgresql://username:password@host:port/database
DATABASE_URL=postgresql://baluhost:CHANGE_ME_TO_A_STRONG_PASSWORD@postgres:5432/baluhost

# ===================================
# Admin User (Created on First Startup)
# ===================================
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@example.com
# IMPORTANT: Change this password immediately after first login!
ADMIN_PASSWORD=changeme

# ===================================
# CORS Configuration
# ===================================
# Comma-separated list of allowed origins
# For production, set to your actual domain(s)
CORS_ORIGINS=https://nas.yourdomain.com,https://yourdomain.com

# ===================================
# Server Configuration
# ===================================
# Frontend port exposed to host (default: 80)
# Set to 443 if using SSL termination at docker level
FRONTEND_PORT=80

# Debug mode (set to false in production)
DEBUG=false

# ===================================
# Optional: pgAdmin (Database Management Tool)
# ===================================
# Only starts with: docker-compose --profile tools up
PGADMIN_EMAIL=admin@baluhost.local
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# ===================================
# Optional: VPN Configuration
# ===================================
# Encryption key for WireGuard VPN private keys
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
VPN_ENCRYPTION_KEY=

# ===================================
# Optional: Mobile Push Notifications (Firebase)
# ===================================
# Path to Firebase service account JSON (if using mobile notifications)
FIREBASE_CREDENTIALS=

# ===================================
# Optional: Mobile Server URL Override
# ===================================
# Override server URL in QR codes for mobile device pairing
# Useful if your server is behind NAT or uses a different external address
MOBILE_SERVER_URL=

# ===================================
# Optional: Monitoring (Prometheus & Grafana)
# ===================================
# Start monitoring with: docker-compose --profile monitoring up

# Prometheus port (metrics collection)
PROMETHEUS_PORT=9090

# Grafana port (dashboards)
GRAFANA_PORT=3001

# Grafana admin credentials
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Grafana root URL (change to your domain in production)
GRAFANA_ROOT_URL=http://localhost:3001

# ===================================
# Optional: Network Configuration
# ===================================
# Enforce localhost-only access for sensitive endpoints
# Recommended for home networks without additional security layers
ENFORCE_LOCAL_ONLY=false

# Allow unauthenticated profile list for login screen
# Set to false to require authentication even for profile list
ALLOW_PUBLIC_PROFILE_LIST=true

# ===================================
# Notes for Production Deployment
# ===================================
# 1. Generate secure random values for all SECRET_* variables
# 2. Use strong passwords for POSTGRES_PASSWORD and ADMIN_PASSWORD
# 3. Change ADMIN_PASSWORD immediately after first login
# 4. Set CORS_ORIGINS to your actual domain(s)
# 5. Consider setting ENFORCE_LOCAL_ONLY=true for home deployments
# 6. Set DEBUG=false in production
# 7. Use HTTPS in production (configure reverse proxy with Let's Encrypt)
# 8. Regularly backup PostgreSQL database and storage volumes
# 9. Monitor logs and set up alerting
# 10. Review security settings in PRODUCTION_READINESS.md
