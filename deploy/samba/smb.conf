# BaluHost Samba Configuration
# Copy to /etc/samba/smb.conf (backup original first)

[global]
    workgroup = WORKGROUP
    server string = BaluHost NAS
    security = user
    map to guest = never
    passdb backend = tdbsam

    # Protocol security
    min protocol = SMB2
    server signing = default

    # Performance — Throughput
    socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=131072 SO_SNDBUF=131072
    use sendfile = yes
    min receivefile size = 16384
    aio read size = 16384
    aio write size = 16384

    # Performance — Small Files (CRITICAL for many-file copies)
    strict sync = no
    sync always = no

    # Performance — Caching
    getwd cache = yes

    # SMB3 Multichannel (when multiple NICs are available)
    server multi channel support = yes

    # Disable printing
    load printers = no
    disable spoolss = yes

    # Logging
    log file = /var/log/samba/log.%m
    max log size = 1000
    logging = file

    # Include BaluHost-managed shares (auto-generated)
    include = /etc/samba/baluhost-shares.conf
