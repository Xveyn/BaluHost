import { createElement } from 'react';
import { Download, Server, Globe, Puzzle, Bell, Gauge, Cloud, Plug, Upload } from 'lucide-react';
import type { ApiSection } from './types';

const icon = (Icon: React.ComponentType<{ className?: string }>) =>
  createElement(Icon, { className: 'w-5 h-5' });

export const featureSections: ApiSection[] = [
  {
    title: 'Updates',
    icon: icon(Download),
    endpoints: [
      { method: 'GET', path: '/api/updates/version', description: 'Get Current Version', requiresAuth: true, response: '{ "version": "1.8.0", "build_date": "2026-02-18" }' },
      { method: 'GET', path: '/api/updates/release-notes', description: 'Get Release Notes', requiresAuth: true, response: '{ "notes": [...] }' },
      { method: 'GET', path: '/api/updates/check', description: 'Check for Updates', requiresAuth: true, response: '{ "available": true, "latest_version": "1.5.2", "changelog": "..." }' },
      {
        method: 'POST',
        path: '/api/updates/start',
        description: 'Start Update (Admin)',
        requiresAuth: true,
        body: [{ field: 'version', type: 'string', required: false, description: 'Target version (default: latest)' }],
        response: '{ "update_id": "upd_123", "status": "downloading" }',
      },
      {
        method: 'GET',
        path: '/api/updates/progress/{update_id}',
        description: 'Get Update Progress',
        requiresAuth: true,
        params: [{ name: 'update_id', type: 'string', required: true, description: 'Update ID' }],
        response: '{ "status": "installing", "percent": 75, "step": "Applying migrations..." }',
      },
      { method: 'GET', path: '/api/updates/current', description: 'Get Current Update Status', requiresAuth: true, response: '{ "status": "idle" }' },
      { method: 'POST', path: '/api/updates/rollback', description: 'Rollback Update (Admin)', requiresAuth: true, response: '{ "success": true, "rolled_back_to": "1.5.0" }' },
      { method: 'GET', path: '/api/updates/history', description: 'Get Update History', requiresAuth: true, response: '[{ "version": "1.5.1", "installed_at": "...", "status": "success" }]' },
      { method: 'GET', path: '/api/updates/config', description: 'Get Update Config', requiresAuth: true, response: '{ "auto_check": true, "auto_install": false, "channel": "stable" }' },
      { method: 'PUT', path: '/api/updates/config', description: 'Update Update Config (Admin)', requiresAuth: true, response: '{ "auto_check": true, "channel": "beta" }' },
    ],
  },
  {
    title: 'Samba/SMB',
    icon: icon(Server),
    endpoints: [
      { method: 'GET', path: '/api/samba/status', description: 'Get Samba Status', requiresAuth: true, response: '{ "running": true, "version": "4.19.0", "shares": 3 }' },
      { method: 'GET', path: '/api/samba/users', description: 'List Samba Users', requiresAuth: true, response: '{ "users": [{ "id": 1, "username": "admin", "samba_enabled": true }] }' },
      {
        method: 'POST',
        path: '/api/samba/users/{user_id}/toggle',
        description: 'Toggle Samba Access for User (Admin)',
        requiresAuth: true,
        params: [{ name: 'user_id', type: 'integer', required: true, description: 'User ID' }],
        response: '{ "user_id": 1, "samba_enabled": false }',
      },
      { method: 'GET', path: '/api/samba/connection-info', description: 'Get SMB Connection Info', requiresAuth: true, response: '{ "host": "192.168.1.100", "port": 445, "shares": [...] }' },
    ],
  },
  {
    title: 'WebDAV',
    icon: icon(Globe),
    endpoints: [
      { method: 'GET', path: '/api/webdav/status', description: 'Get WebDAV Status', requiresAuth: true, response: '{ "running": true, "url": "http://192.168.1.100:8080/webdav" }' },
      { method: 'GET', path: '/api/webdav/connection-info', description: 'Get WebDAV Connection Info', requiresAuth: true, response: '{ "url": "http://192.168.1.100:8080/webdav", "auth_required": true }' },
    ],
  },
  {
    title: 'Plugins',
    icon: icon(Puzzle),
    endpoints: [
      { method: 'GET', path: '/api/plugins', description: 'List Plugins', requiresAuth: true, response: '[{ "name": "gallery", "enabled": true, "version": "1.0.0" }]' },
      { method: 'GET', path: '/api/plugins/permissions', description: 'Get Plugin Permissions', requiresAuth: true, response: '[{ "permission": "files.read", "description": "Read files" }]' },
      { method: 'GET', path: '/api/plugins/ui/manifest', description: 'Get Plugin UI Manifest', requiresAuth: true, response: '{ "plugins": [{ "name": "gallery", "entry": "/plugins/gallery/index.js" }] }' },
      {
        method: 'GET',
        path: '/api/plugins/{name}',
        description: 'Get Plugin Detail',
        requiresAuth: true,
        params: [{ name: 'name', type: 'string', required: true, description: 'Plugin name' }],
        response: '{ "name": "gallery", "enabled": true, "version": "1.0.0", "config": {...} }',
      },
      {
        method: 'POST',
        path: '/api/plugins/{name}/toggle',
        description: 'Toggle Plugin (Admin)',
        requiresAuth: true,
        params: [{ name: 'name', type: 'string', required: true, description: 'Plugin name' }],
        response: '{ "name": "gallery", "enabled": false }',
      },
      {
        method: 'GET',
        path: '/api/plugins/{name}/config',
        description: 'Get Plugin Config',
        requiresAuth: true,
        params: [{ name: 'name', type: 'string', required: true, description: 'Plugin name' }],
        response: '{ "settings": {...} }',
      },
      {
        method: 'PUT',
        path: '/api/plugins/{name}/config',
        description: 'Update Plugin Config (Admin)',
        requiresAuth: true,
        params: [{ name: 'name', type: 'string', required: true, description: 'Plugin name' }],
        response: '{ "settings": {...} }',
      },
      {
        method: 'GET',
        path: '/api/plugins/{name}/ui/{file_path}',
        description: 'Get Plugin UI Asset',
        requiresAuth: true,
        params: [
          { name: 'name', type: 'string', required: true, description: 'Plugin name' },
          { name: 'file_path', type: 'string', required: true, description: 'Asset file path' },
        ],
        response: 'Static file content (JS, CSS, HTML)',
      },
      {
        method: 'DELETE',
        path: '/api/plugins/{name}',
        description: 'Uninstall Plugin (Admin)',
        requiresAuth: true,
        params: [{ name: 'name', type: 'string', required: true, description: 'Plugin name' }],
        response: '{ "uninstalled": true }',
      },
    ],
  },
  {
    title: 'Notifications',
    icon: icon(Bell),
    endpoints: [
      {
        method: 'GET',
        path: '/api/notifications',
        description: 'List Notifications',
        requiresAuth: true,
        params: [
          { name: 'unread_only', type: 'boolean', required: false, description: 'Only unread' },
          { name: 'limit', type: 'integer', required: false, description: 'Limit (default: 50)' },
        ],
        response: '[{ "id": 1, "title": "Backup complete", "read": false, "created_at": "..." }]',
      },
      { method: 'GET', path: '/api/notifications/unread-count', description: 'Get Unread Count', requiresAuth: true, response: '{ "count": 3 }' },
      {
        method: 'POST',
        path: '/api/notifications/{notification_id}/read',
        description: 'Mark Notification as Read',
        requiresAuth: true,
        params: [{ name: 'notification_id', type: 'integer', required: true, description: 'Notification ID' }],
        response: '{ "id": 1, "read": true }',
      },
      { method: 'POST', path: '/api/notifications/read-all', description: 'Mark All as Read', requiresAuth: true, response: '{ "marked": 3 }' },
      {
        method: 'POST',
        path: '/api/notifications/{notification_id}/dismiss',
        description: 'Dismiss Notification',
        requiresAuth: true,
        params: [{ name: 'notification_id', type: 'integer', required: true, description: 'Notification ID' }],
        response: '{ "id": 1, "dismissed": true }',
      },
      { method: 'GET', path: '/api/notifications/preferences', description: 'Get Notification Preferences', requiresAuth: true, response: '{ "email_enabled": false, "push_enabled": true }' },
      { method: 'PUT', path: '/api/notifications/preferences', description: 'Update Notification Preferences', requiresAuth: true, response: '{ "email_enabled": true, "push_enabled": true }' },
      {
        method: 'POST',
        path: '/api/notifications',
        description: 'Create Notification (Admin)',
        requiresAuth: true,
        body: [
          { field: 'title', type: 'string', required: true, description: 'Notification title' },
          { field: 'message', type: 'string', required: true, description: 'Notification message' },
          { field: 'type', type: 'string', required: false, description: 'Type: info/warning/error' },
        ],
        response: '{ "id": 1, "title": "System update", "created_at": "..." }',
      },
    ],
  },
  {
    title: 'Benchmark',
    icon: icon(Gauge),
    endpoints: [
      { method: 'GET', path: '/api/benchmark/disks', description: 'Get Available Benchmark Disks', requiresAuth: true, response: '{ "disks": [{ "device": "/dev/sda", "model": "Samsung SSD" }] }' },
      { method: 'GET', path: '/api/benchmark/profiles', description: 'List Benchmark Profiles', requiresAuth: true, response: '[{ "name": "quick", "duration_seconds": 30 }]' },
      {
        method: 'POST',
        path: '/api/benchmark/start',
        description: 'Start Benchmark',
        requiresAuth: true,
        body: [
          { field: 'disk', type: 'string', required: true, description: 'Disk device path' },
          { field: 'profile', type: 'string', required: false, description: 'Benchmark profile' },
        ],
        response: '{ "benchmark_id": "bench_123", "status": "running" }',
      },
      { method: 'POST', path: '/api/benchmark/prepare', description: 'Prepare Benchmark', requiresAuth: true, response: '{ "ready": true, "warnings": [...] }' },
      { method: 'POST', path: '/api/benchmark/start-confirmed', description: 'Start Confirmed Benchmark', requiresAuth: true, response: '{ "benchmark_id": "bench_123" }' },
      {
        method: 'GET',
        path: '/api/benchmark/{benchmark_id}',
        description: 'Get Benchmark Detail',
        requiresAuth: true,
        params: [{ name: 'benchmark_id', type: 'string', required: true, description: 'Benchmark ID' }],
        response: '{ "id": "bench_123", "status": "completed", "results": {...} }',
      },
      {
        method: 'GET',
        path: '/api/benchmark/{benchmark_id}/progress',
        description: 'Get Benchmark Progress',
        requiresAuth: true,
        params: [{ name: 'benchmark_id', type: 'string', required: true, description: 'Benchmark ID' }],
        response: '{ "percent": 75, "current_test": "sequential_read" }',
      },
      {
        method: 'POST',
        path: '/api/benchmark/{benchmark_id}/cancel',
        description: 'Cancel Benchmark',
        requiresAuth: true,
        params: [{ name: 'benchmark_id', type: 'string', required: true, description: 'Benchmark ID' }],
        response: '{ "cancelled": true }',
      },
      {
        method: 'POST',
        path: '/api/benchmark/{benchmark_id}/mark-failed',
        description: 'Mark Benchmark as Failed',
        requiresAuth: true,
        params: [{ name: 'benchmark_id', type: 'string', required: true, description: 'Benchmark ID' }],
        response: '{ "status": "failed" }',
      },
      { method: 'GET', path: '/api/benchmark/', description: 'List All Benchmarks', requiresAuth: true, response: '[{ "id": "bench_123", "status": "completed", "created_at": "..." }]' },
    ],
  },
  {
    title: 'Cloud Import',
    icon: icon(Cloud),
    endpoints: [
      { method: 'GET', path: '/api/cloud/providers', description: 'List Cloud Providers', requiresAuth: true, response: '[{ "id": "google_drive", "name": "Google Drive", "oauth": true }]' },
      {
        method: 'PUT',
        path: '/api/cloud/oauth-config',
        description: 'Set OAuth Config',
        requiresAuth: true,
        body: [
          { field: 'provider', type: 'string', required: true, description: 'Provider ID' },
          { field: 'client_id', type: 'string', required: true, description: 'OAuth client ID' },
          { field: 'client_secret', type: 'string', required: true, description: 'OAuth client secret' },
        ],
        response: '{ "provider": "google_drive", "configured": true }',
      },
      {
        method: 'DELETE',
        path: '/api/cloud/oauth-config/{provider}',
        description: 'Delete OAuth Config',
        requiresAuth: true,
        params: [{ name: 'provider', type: 'string', required: true, description: 'Provider ID' }],
        response: '{ "deleted": true }',
      },
      { method: 'GET', path: '/api/cloud/connections', description: 'List Cloud Connections', requiresAuth: true, response: '[{ "id": 1, "provider": "google_drive", "email": "user@gmail.com" }]' },
      {
        method: 'DELETE',
        path: '/api/cloud/connections/{connection_id}',
        description: 'Delete Cloud Connection',
        requiresAuth: true,
        params: [{ name: 'connection_id', type: 'integer', required: true, description: 'Connection ID' }],
        response: '{ "deleted": true }',
      },
      {
        method: 'GET',
        path: '/api/cloud/oauth/{provider}/start',
        description: 'Start OAuth Flow',
        requiresAuth: true,
        params: [{ name: 'provider', type: 'string', required: true, description: 'Provider ID' }],
        response: '{ "auth_url": "https://accounts.google.com/o/oauth2/..." }',
      },
      { method: 'GET', path: '/api/cloud/oauth/callback', description: 'OAuth Callback (GET)', requiresAuth: false, response: 'Redirect to frontend' },
      { method: 'POST', path: '/api/cloud/oauth/callback', description: 'OAuth Callback (POST)', requiresAuth: true, response: '{ "connection_id": 1, "provider": "google_drive" }' },
      { method: 'POST', path: '/api/cloud/icloud/connect', description: 'Connect iCloud', requiresAuth: true, body: [{ field: 'apple_id', type: 'string', required: true, description: 'Apple ID' }, { field: 'password', type: 'string', required: true, description: 'Password' }], response: '{ "requires_2fa": true }' },
      { method: 'POST', path: '/api/cloud/icloud/2fa', description: 'Submit iCloud 2FA', requiresAuth: true, body: [{ field: 'code', type: 'string', required: true, description: '2FA code' }], response: '{ "connection_id": 2, "provider": "icloud" }' },
      { method: 'POST', path: '/api/cloud/dev/connect', description: 'Dev Connect (Mock)', requiresAuth: true, response: '{ "connection_id": 3, "provider": "mock" }' },
      {
        method: 'GET',
        path: '/api/cloud/browse/{connection_id}',
        description: 'Browse Cloud Files',
        requiresAuth: true,
        params: [
          { name: 'connection_id', type: 'integer', required: true, description: 'Connection ID' },
          { name: 'path', type: 'string', required: false, description: 'Folder path' },
        ],
        response: '[{ "name": "photo.jpg", "size": 2048576, "is_folder": false }]',
      },
      {
        method: 'POST',
        path: '/api/cloud/import',
        description: 'Start Cloud Import',
        requiresAuth: true,
        body: [
          { field: 'connection_id', type: 'integer', required: true, description: 'Connection ID' },
          { field: 'files', type: 'string[]', required: true, description: 'File paths to import' },
          { field: 'destination', type: 'string', required: false, description: 'Target folder' },
        ],
        response: '{ "job_id": "job_123", "status": "running", "total_files": 5 }',
      },
      { method: 'GET', path: '/api/cloud/jobs', description: 'List Import Jobs', requiresAuth: true, response: '[{ "job_id": "job_123", "status": "completed", "files_imported": 5 }]' },
      {
        method: 'GET',
        path: '/api/cloud/jobs/{job_id}',
        description: 'Get Import Job Detail',
        requiresAuth: true,
        params: [{ name: 'job_id', type: 'string', required: true, description: 'Job ID' }],
        response: '{ "job_id": "job_123", "status": "running", "progress": 60 }',
      },
      {
        method: 'POST',
        path: '/api/cloud/jobs/{job_id}/cancel',
        description: 'Cancel Import Job',
        requiresAuth: true,
        params: [{ name: 'job_id', type: 'string', required: true, description: 'Job ID' }],
        response: '{ "cancelled": true }',
      },
    ],
  },
  {
    title: 'Tapo Smart Plugs',
    icon: icon(Plug),
    endpoints: [
      {
        method: 'POST',
        path: '/api/tapo/devices',
        description: 'Add Tapo Device',
        requiresAuth: true,
        body: [
          { field: 'ip_address', type: 'string', required: true, description: 'Device IP address' },
          { field: 'email', type: 'string', required: true, description: 'TP-Link account email' },
          { field: 'password', type: 'string', required: true, description: 'TP-Link account password' },
          { field: 'name', type: 'string', required: false, description: 'Device name' },
        ],
        response: '{ "id": 1, "name": "NAS Plug", "ip_address": "192.168.1.50", "is_online": true }',
      },
      { method: 'GET', path: '/api/tapo/devices', description: 'List Tapo Devices', requiresAuth: true, response: '[{ "id": 1, "name": "NAS Plug", "is_online": true, "current_watts": 4.2 }]' },
      {
        method: 'GET',
        path: '/api/tapo/devices/{device_id}',
        description: 'Get Tapo Device Detail',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'integer', required: true, description: 'Device ID' }],
        response: '{ "id": 1, "name": "NAS Plug", "model": "P110", "is_online": true }',
      },
      {
        method: 'PATCH',
        path: '/api/tapo/devices/{device_id}',
        description: 'Update Tapo Device',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'integer', required: true, description: 'Device ID' }],
        body: [{ field: 'name', type: 'string', required: false, description: 'New device name' }],
        response: '{ "id": 1, "name": "Updated Name" }',
      },
      {
        method: 'DELETE',
        path: '/api/tapo/devices/{device_id}',
        description: 'Delete Tapo Device',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'integer', required: true, description: 'Device ID' }],
        response: '204 No Content',
      },
      { method: 'GET', path: '/api/tapo/power/history', description: 'Get Power History', requiresAuth: true, params: [{ name: 'device_id', type: 'integer', required: false, description: 'Filter by device' }], response: '[{ "timestamp": "...", "watts": 4.2 }]' },
      {
        method: 'GET',
        path: '/api/tapo/power/current/{device_id}',
        description: 'Get Current Power Reading',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'integer', required: true, description: 'Device ID' }],
        response: '{ "watts": 4.2, "voltage": 230, "current_ma": 18 }',
      },
    ],
  },
  {
    title: 'Chunked Upload',
    icon: icon(Upload),
    endpoints: [
      {
        method: 'POST',
        path: '/api/files/upload/chunked/init',
        description: 'Init Chunked Upload',
        requiresAuth: true,
        body: [
          { field: 'filename', type: 'string', required: true, description: 'File name' },
          { field: 'total_size', type: 'integer', required: true, description: 'Total file size in bytes' },
          { field: 'chunk_size', type: 'integer', required: false, description: 'Chunk size (default: 5MB)' },
        ],
        response: '{ "upload_id": "upl_123", "chunk_size": 5242880, "total_chunks": 10 }',
      },
      {
        method: 'POST',
        path: '/api/files/upload/chunked/{upload_id}/chunk',
        description: 'Upload Chunk',
        requiresAuth: true,
        params: [{ name: 'upload_id', type: 'string', required: true, description: 'Upload ID' }],
        body: [{ field: 'chunk', type: 'file', required: true, description: 'Chunk data' }],
        response: '{ "chunk_index": 3, "received": true }',
      },
      {
        method: 'POST',
        path: '/api/files/upload/chunked/{upload_id}/complete',
        description: 'Complete Chunked Upload',
        requiresAuth: true,
        params: [{ name: 'upload_id', type: 'string', required: true, description: 'Upload ID' }],
        response: '{ "filename": "large_file.zip", "size": 52428800, "path": "/large_file.zip" }',
      },
      {
        method: 'DELETE',
        path: '/api/files/upload/chunked/{upload_id}',
        description: 'Abort Chunked Upload',
        requiresAuth: true,
        params: [{ name: 'upload_id', type: 'string', required: true, description: 'Upload ID' }],
        response: '{ "aborted": true }',
      },
      {
        method: 'POST',
        path: '/api/files/progress-token/{upload_id}',
        description: 'Get Upload Progress Token',
        requiresAuth: true,
        params: [{ name: 'upload_id', type: 'string', required: true, description: 'Upload ID' }],
        response: '{ "token": "sse_token_123" }',
      },
      {
        method: 'GET',
        path: '/api/files/progress/{upload_id}',
        description: 'Get Upload Progress (SSE)',
        requiresAuth: true,
        params: [{ name: 'upload_id', type: 'string', required: true, description: 'Upload ID' }],
        response: 'Server-Sent Events stream with progress updates',
      },
    ],
  },
];
