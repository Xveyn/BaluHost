import { createElement } from 'react';
import { Smartphone, Wifi, MonitorSmartphone, Network, KeyRound } from 'lucide-react';
import type { ApiSection } from './types';

const icon = (Icon: React.ComponentType<{ className?: string }>) =>
  createElement(Icon, { className: 'w-5 h-5' });

export const deviceSections: ApiSection[] = [
  {
    title: 'Mobile Devices',
    icon: icon(Smartphone),
    endpoints: [
      {
        method: 'POST',
        path: '/api/mobile/token/generate',
        description: 'Generate QR Registration Token (Localhost Only)',
        requiresAuth: true,
        params: [
          { name: 'include_vpn', type: 'boolean', required: false, description: 'Include VPN config in QR code' },
          { name: 'device_name', type: 'string', required: false, description: 'Device name (default: iOS Device)' },
          { name: 'token_validity_days', type: 'integer', required: false, description: 'Token validity 30-180 days (default: 90)' },
        ],
        response: `{
  "registration_token": "reg_abc123...",
  "qr_data": "baluhost://register?token=...",
  "expires_at": "2025-11-23T10:35:00",
  "server_url": "http://192.168.1.100:8000"
}`,
      },
      {
        method: 'POST',
        path: '/api/mobile/register',
        description: 'Register Mobile Device (Called by App)',
        requiresAuth: false,
        body: [
          { field: 'registration_token', type: 'string', required: true, description: 'Token from QR code' },
          { field: 'device_name', type: 'string', required: true, description: 'Device name' },
          { field: 'device_model', type: 'string', required: false, description: 'Device model' },
          { field: 'os_version', type: 'string', required: false, description: 'OS version' },
        ],
        response: '{ "access_token": "mobile_token_abc...", "device_id": "uuid-1234", "user": { "id": 1, "username": "admin" } }',
      },
      { method: 'GET', path: '/api/mobile/devices', description: 'List My Mobile Devices', requiresAuth: true, response: '[{ "id": "uuid-1234", "device_name": "iPhone 15 Pro", "is_active": true, "last_seen": "..." }]' },
      {
        method: 'GET',
        path: '/api/mobile/devices/{device_id}',
        description: 'Get Mobile Device Detail',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        response: '{ "id": "uuid-1234", "device_name": "iPhone 15 Pro", "device_model": "iPhone15,2" }',
      },
      {
        method: 'PATCH',
        path: '/api/mobile/devices/{device_id}',
        description: 'Update Mobile Device',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        body: [{ field: 'device_name', type: 'string', required: false, description: 'New device name' }],
        response: '{ "id": "uuid-1234", "device_name": "My iPhone" }',
      },
      {
        method: 'DELETE',
        path: '/api/mobile/devices/{device_id}',
        description: 'Delete Mobile Device',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        response: '204 No Content',
      },
      {
        method: 'POST',
        path: '/api/mobile/devices/{device_id}/push-token',
        description: 'Register FCM Push Token',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        body: [{ field: 'push_token', type: 'string', required: true, description: 'Firebase Cloud Messaging token' }],
        response: '{ "success": true, "token_verified": true }',
      },
      {
        method: 'GET',
        path: '/api/mobile/devices/{device_id}/notifications',
        description: 'Get Device Notifications',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        response: '[{ "id": 1, "title": "Sync complete", "read": false }]',
      },
      {
        method: 'GET',
        path: '/api/mobile/camera/settings/{device_id}',
        description: 'Get Camera Backup Settings',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        response: '{ "enabled": true, "wifi_only": true, "include_videos": false }',
      },
      {
        method: 'PUT',
        path: '/api/mobile/camera/settings/{device_id}',
        description: 'Update Camera Backup Settings',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        response: '{ "enabled": true, "wifi_only": true }',
      },
      {
        method: 'GET',
        path: '/api/mobile/sync/folders/{device_id}',
        description: 'Get Mobile Sync Folders',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        response: '[{ "path": "/Photos", "enabled": true }]',
      },
      {
        method: 'POST',
        path: '/api/mobile/sync/folders/{device_id}',
        description: 'Configure Mobile Sync Folder',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        response: '{ "path": "/Documents", "enabled": true }',
      },
    ],
  },
  {
    title: 'VPN',
    icon: icon(Wifi),
    endpoints: [
      {
        method: 'POST',
        path: '/api/vpn/generate-config',
        description: 'Generate WireGuard VPN Config',
        requiresAuth: true,
        body: [
          { field: 'device_name', type: 'string', required: true, description: 'Device name for VPN client' },
          { field: 'server_public_endpoint', type: 'string', required: true, description: 'Public IP/domain:port' },
        ],
        response: '{ "config_file": "[Interface]\\nPrivateKey=...\\n[Peer]\\n...", "client_id": 1, "client_ip": "10.0.0.2" }',
      },
      { method: 'GET', path: '/api/vpn/clients', description: 'List My VPN Clients', requiresAuth: true, response: '[{ "id": 1, "device_name": "iPhone", "client_ip": "10.0.0.2", "is_active": true }]' },
      {
        method: 'GET',
        path: '/api/vpn/clients/{client_id}',
        description: 'Get VPN Client Detail',
        requiresAuth: true,
        params: [{ name: 'client_id', type: 'integer', required: true, description: 'Client ID' }],
        response: '{ "id": 1, "device_name": "iPhone", "client_ip": "10.0.0.2" }',
      },
      {
        method: 'PATCH',
        path: '/api/vpn/clients/{client_id}',
        description: 'Update VPN Client',
        requiresAuth: true,
        params: [{ name: 'client_id', type: 'integer', required: true, description: 'Client ID' }],
        body: [{ field: 'device_name', type: 'string', required: false, description: 'New device name' }],
        response: '{ "id": 1, "device_name": "Updated Name" }',
      },
      {
        method: 'DELETE',
        path: '/api/vpn/clients/{client_id}',
        description: 'Delete VPN Client',
        requiresAuth: true,
        params: [{ name: 'client_id', type: 'integer', required: true, description: 'Client ID' }],
        response: '204 No Content',
      },
      {
        method: 'POST',
        path: '/api/vpn/clients/{client_id}/revoke',
        description: 'Revoke VPN Client',
        requiresAuth: true,
        params: [{ name: 'client_id', type: 'integer', required: true, description: 'Client ID' }],
        response: '204 No Content',
      },
      { method: 'GET', path: '/api/vpn/server-config', description: 'Get VPN Server Config (Admin)', requiresAuth: true, response: '{ "listen_port": 51820, "address": "10.0.0.1/24" }' },
      {
        method: 'POST',
        path: '/api/vpn/handshake/{client_id}',
        description: 'Trigger VPN Handshake',
        requiresAuth: true,
        params: [{ name: 'client_id', type: 'integer', required: true, description: 'Client ID' }],
        response: '204 No Content',
      },
      {
        method: 'POST',
        path: '/api/vpn/fritzbox/upload',
        description: 'Upload Fritz!Box WireGuard Config (Admin)',
        requiresAuth: true,
        body: [
          { field: 'config_content', type: 'string', required: true, description: 'WireGuard .conf file content' },
          { field: 'public_endpoint', type: 'string', required: true, description: 'Public IP/domain for endpoint' },
        ],
        response: '{ "id": 1, "endpoint": "vpn.example.com:51820", "is_active": true }',
      },
      { method: 'GET', path: '/api/vpn/fritzbox/config', description: 'Get Fritz!Box Config', requiresAuth: true, response: '{ "configs": [...] }' },
      {
        method: 'DELETE',
        path: '/api/vpn/fritzbox/config/{config_id}',
        description: 'Delete Fritz!Box Config',
        requiresAuth: true,
        params: [{ name: 'config_id', type: 'integer', required: true, description: 'Config ID' }],
        response: '{ "deleted": true }',
      },
      { method: 'GET', path: '/api/vpn/fritzbox/qr', description: 'Get Fritz!Box Config as QR Code Data', requiresAuth: true, response: '{ "config_base64": "W0ludGVyZmFjZV0..." }' },
    ],
  },
  {
    title: 'Devices',
    icon: icon(MonitorSmartphone),
    endpoints: [
      { method: 'GET', path: '/api/devices/all', description: 'List All Devices', requiresAuth: true, response: '{ "mobile": [...], "desktop": [...] }' },
      {
        method: 'PATCH',
        path: '/api/devices/mobile/{device_id}/name',
        description: 'Rename Mobile Device',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        body: [{ field: 'name', type: 'string', required: true, description: 'New device name' }],
        response: '{ "device_id": "...", "name": "My Phone" }',
      },
      {
        method: 'PATCH',
        path: '/api/devices/desktop/{device_id}/name',
        description: 'Rename Desktop Device',
        requiresAuth: true,
        params: [{ name: 'device_id', type: 'string', required: true, description: 'Device ID' }],
        body: [{ field: 'name', type: 'string', required: true, description: 'New device name' }],
        response: '{ "device_id": "...", "name": "Work Laptop" }',
      },
    ],
  },
  {
    title: 'Server Profiles',
    icon: icon(Network),
    endpoints: [
      { method: 'GET', path: '/api/server-profiles/public', description: 'List Public Server Profiles', requiresAuth: false, response: '[{ "id": 1, "name": "Home NAS", "host": "192.168.1.100" }]' },
      { method: 'GET', path: '/api/server-profiles', description: 'List Server Profiles', requiresAuth: true, response: '[{ "id": 1, "name": "Home NAS", "host": "192.168.1.100" }]' },
      {
        method: 'GET',
        path: '/api/server-profiles/{profile_id}',
        description: 'Get Server Profile Detail',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '{ "id": 1, "name": "Home NAS", "host": "192.168.1.100", "port": 22 }',
      },
      {
        method: 'POST',
        path: '/api/server-profiles',
        description: 'Create Server Profile',
        requiresAuth: true,
        body: [
          { field: 'name', type: 'string', required: true, description: 'Profile name' },
          { field: 'host', type: 'string', required: true, description: 'Hostname or IP' },
          { field: 'port', type: 'integer', required: false, description: 'SSH port (default: 22)' },
        ],
        response: '{ "id": 1, "name": "Home NAS" }',
      },
      {
        method: 'PUT',
        path: '/api/server-profiles/{profile_id}',
        description: 'Update Server Profile',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '{ "id": 1, "name": "Updated NAS" }',
      },
      {
        method: 'DELETE',
        path: '/api/server-profiles/{profile_id}',
        description: 'Delete Server Profile',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '204 No Content',
      },
      {
        method: 'POST',
        path: '/api/server-profiles/{profile_id}/check-connectivity',
        description: 'Check Server Connectivity',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '{ "reachable": true, "latency_ms": 12 }',
      },
      {
        method: 'POST',
        path: '/api/server-profiles/{profile_id}/start',
        description: 'Start Remote Server (WoL)',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '{ "success": true, "message": "Wake-on-LAN packet sent" }',
      },
    ],
  },
  {
    title: 'VPN Profiles',
    icon: icon(KeyRound),
    endpoints: [
      { method: 'GET', path: '/api/vpn-profiles', description: 'List VPN Profiles', requiresAuth: true, response: '[{ "id": 1, "name": "Office VPN", "type": "wireguard" }]' },
      {
        method: 'GET',
        path: '/api/vpn-profiles/{profile_id}',
        description: 'Get VPN Profile Detail',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '{ "id": 1, "name": "Office VPN", "type": "wireguard", "config": "..." }',
      },
      {
        method: 'POST',
        path: '/api/vpn-profiles',
        description: 'Create VPN Profile',
        requiresAuth: true,
        body: [
          { field: 'name', type: 'string', required: true, description: 'Profile name' },
          { field: 'type', type: 'string', required: true, description: 'VPN type: wireguard/openvpn' },
        ],
        response: '{ "id": 1, "name": "Office VPN" }',
      },
      {
        method: 'PUT',
        path: '/api/vpn-profiles/{profile_id}',
        description: 'Update VPN Profile',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '{ "id": 1, "name": "Updated VPN" }',
      },
      {
        method: 'DELETE',
        path: '/api/vpn-profiles/{profile_id}',
        description: 'Delete VPN Profile',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '204 No Content',
      },
      {
        method: 'POST',
        path: '/api/vpn-profiles/{profile_id}/test-connection',
        description: 'Test VPN Connection',
        requiresAuth: true,
        params: [{ name: 'profile_id', type: 'integer', required: true, description: 'Profile ID' }],
        response: '{ "success": true, "latency_ms": 25 }',
      },
    ],
  },
];
